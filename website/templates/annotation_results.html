{% extends "main.html" %}
{% block content %}
{% include "header.html" %}

<!-- CSS -->
<style>
table {
    width:100%;
}
th, td {
    padding: 5px;
    text-align: left;
}
table#t01 th  {
    background-color: white;
    color: black;
}

.checkbox-red[type="checkbox"].filled-in:checked + label:after{
     border: 2px solid #FF5252;
     background-color: #FF5252;
}
</style>

<!-- JavaScript -->
<script>
$(document).ready(function () {
    $("#remove").on("click", function () {
        $('table tr').has('input[name="data-row"]:checked').remove()
   })
});
</script>

<!-- Body -->
<div class="container">
    
    <div class="section">
        <h5>Annotation results for: 
            <a href="{{ ws_input }}" target="_blank">{{ ws_input }}</a>
        </h5>
    </div>
        
    <div class="divider"></div>
    <br><br>

    <div class="section">
        <button class="btn-large waves-effect waves-light red accent-2" id="remove" type="button">Remove Selected Row(s)</button>
    </div>

    <div class="section">    
        <table id="t01" class="responsive-table striped bordered">
            <tr>
                <th> Remove </th>
                <th> Keypath </th>
                <th> Value </th>
                <th> Mapped Resource </th>
            </tr>
         	
            {% for key, value in demo_output.iteritems() %}
            <tr>
                <td>
                    <input type="checkbox" class="filled-in checkbox-red" name="data-row" id="{{ key }}"/>
                    <label for="{{ key }}"></label>
                </td>
                <td> {{ key }} </td>
                <td> Add exmaple value here </td>
                <td>
                    {% if value is string %}
                    <a href="http://www.ebi.ac.uk/miriam/main/collections/{{ value }}" target="_blank">
                        {{ value }}
                    </a>
                    {% else %}
                
                    <!-- http://stackoverflow.com/questions/10175445/load-page-on-selection-from-dropdown-form -->
                   <select onchange="window.open(this.options[this.selectedIndex].value,'_blank')" class="browser-default"> 
                        <option value="" disabled selected>Select a resource...</option>
                            {% for v in value %}
                                {% for vk, vv in v.iteritems() %}
                                    <!-- <option value="{{ vv }}"> -->
                                    <option value="http://www.ebi.ac.uk/miriam/main/collections/{{ vk }}">
                                        {{ vv }}
                                    </option>
                                {% endfor %}
                            {% endfor %}
                        <option value="http://www.ebi.ac.uk/miriam/main/collections">No Mapping</option>
                    </select>                                   
                    {% endif %}
                </td>
                
                <!-- <td>
                    <button type="button" class="close" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </td> -->
    
            </tr>
            {% endfor %}
        </table>
    </div>

</div>

{% endblock %}
